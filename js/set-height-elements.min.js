const utilsSHE={mergeDeepObject:(...e)=>{const t=e=>e&&"object"==typeof e;return e.reduce(((e,s)=>(Object.keys(s).forEach((a=>{const r=e[a],i=s[a];Array.isArray(r)&&Array.isArray(i)?e[a]=[...new Set([...i,...r])]:t(r)&&t(i)?e[a]=utilsSHE.mergeDeepObject(r,i):e[a]=i})),e)),{})},debounce(e,t){let s;return(...a)=>{window.clearTimeout(s),s=window.setTimeout((()=>e.apply(this,a)),t)}},uniqueID(){const e=Math.random().toString(36).substr(2);return Date.now().toString(36)+e},returnArrayData:e=>Array.isArray(e)?e:[e],getcssVariable:(e,t)=>window.getComputedStyle(e).getPropertyValue(t),cssVariable(e,t,s=null){const a=utilsSHE.returnArrayData(e);a&&0!==a.length&&a.forEach(((e,a)=>{null!==s?e.style.setProperty(t,s):e.style.removeProperty(t)}))},classElements(e,t,s){const a=utilsSHE.returnArrayData(s),r=utilsSHE.returnArrayData(e);r&&0!==r.length&&r.forEach((e=>{"add"===t&&e.classList.add(...a),"remove"===t&&e.classList.remove(...a)}))},wrapElements(e,t,s="div"){const a=utilsSHE.returnArrayData(e);a&&0!==a.length&&a.forEach((e=>{const a=document.createElement(s);a.className=t,e.parentNode.insertBefore(a,e),a.appendChild(e)}))},unwrapElement(e){utilsSHE.returnArrayData(e).forEach((e=>{const t=e.parentNode;for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}))},removeAttributes(e,t){const s=utilsSHE.returnArrayData(t);utilsSHE.returnArrayData(e).forEach((e=>{s.forEach((t=>{e.removeAttribute(t)}))}))},replaceElement(e,t){e.replaceWith(t)}};function SetHeightElements(e,t={}){const s=utilsSHE.mergeDeepObject({autoInit:!0,cssVariable:"--height",gridOptions:null,initialIndex:0,classElementToOmit:"",debug:!1,on:{init:(e,t)=>{},afterResize:(e,t)=>{},afterChanges:(e,t)=>{},afterUpdate:(e,t)=>{},afterDestroy:e=>{}}},t);let a=[];const r="height-zero",i="height-calculating",n="height-calculated",o=[...e].filter(((e,t)=>s.initialIndex>0?t>=s.initialIndex&&e:e));this.id=utilsSHE.uniqueID(),this.config=s,this.elementsArray=e,this.values=0;const l=e=>{s.debug&&window.console.info(`%cInstace[${this.id}] - ${e}`,"\n          background-color: lightgray;\n          padding: 3px;\n          font-style: italic; \n          color: black;\n        ")},c=(e,t)=>{"init"===e&&(s.on.init(t,this),l("Se ejecuto el callback 'init' correctamente.")),"resize"===e&&(s.on.afterResize(t,this),l("Se ejecuto el callback 'afterResize' correctamente.")),"changes"===e&&(s.on.afterChanges(t,this),l("Se ejecuto el callback 'afterChanges' correctamente.")),"update"===e&&(s.on.afterUpdate(t,this),l("Se ejecuto el callback 'afterUpdate' correctamente.")),"destroy"===e&&(s.on.afterDestroy(this),l("Se ejecuto el callback 'afterDestroy' correctamente."))},u=e=>{let t=0;if(null==s.gridOptions){t=0;const a=[...o];utilsSHE.cssVariable(a,s.cssVariable),utilsSHE.classElements(a,"remove",[r,i,n]),utilsSHE.classElements(a,"add",i),a.forEach(((e,a)=>{const r=e.classList.contains(s.classElementToOmit);e.offsetHeight>t&&!r&&(t=e.offsetHeight)})),utilsSHE.cssVariable(a,s.cssVariable,`${t}px`),utilsSHE.classElements(a,"remove",i),t>0?utilsSHE.classElements(a,"add",n):utilsSHE.classElements(a,"add",r),this.values=t,c(e,t)}else{const a=[],l=[];let u=s.gridOptions.defaultColumns;const d=[...o];if(void 0===u)return void window.console.error("Coloca el valor de 'defaultColumns' para el correcto funcionamiento");void 0!==s.gridOptions.responsive&&Object.keys(s.gridOptions.responsive).reverse().forEach((e=>{window.innerWidth>Number(e)||(u=s.gridOptions.responsive[e])}));let h=d.length;for(;0!==h;){const e=d.splice(0,u);a.push(e),h=d.length}a.forEach((e=>{t=0,utilsSHE.cssVariable(e,s.cssVariable),utilsSHE.classElements(e,"remove",[r,i,n]),utilsSHE.classElements(e,"add",i),e.forEach(((e,a)=>{const r=e.classList.contains(s.classElementToOmit);e.offsetHeight>t&&!r&&(t=e.offsetHeight)})),utilsSHE.cssVariable(e,s.cssVariable,`${t}px`),utilsSHE.classElements(e,"remove",i),t>0?utilsSHE.classElements(e,"add",n):utilsSHE.classElements(e,"add",r),l.push(t)})),this.values=l,c(e,l)}},d=()=>{u("resize"),l("Se actualizaron los valores mediante Resize.")},h=()=>{u("changes"),l("Se actualizaron los valores por cambios en el DOM.")};return this.startResizeCalculation=()=>{window.addEventListener("resize",d),l("Observando el Resize...")},this.stopResizeCalculation=()=>{window.removeEventListener("resize",d),l("Se dej贸 de Observar el Resize.")},this.startChangesObserver=()=>{[...o].forEach(((e,t)=>{a[t].observe(e,{childList:!0,subtree:!0})})),l("Observando cambios en el DOM...")},this.stopChangesObserver=()=>{[...o].forEach(((e,t)=>{a[t].disconnect()})),l("Se dejaron de Observar los cambios en el DOM.")},this.update=()=>{u("update"),l("Se actualizaron los valores manualmente.")},this.init=()=>{u("init"),[...o].forEach((e=>{const t=new window.MutationObserver(h);a.push(t)})),this.startResizeCalculation(),this.startChangesObserver(),l("Se han configurado los elementos de manera exitosa.")},this.destroy=()=>{[...o].forEach(((e,t)=>{e.style.removeProperty(s.cssVariable)})),l("Se limpiaron los valores calculados de los elementos."),this.stopResizeCalculation(),this.stopChangesObserver(),this.values=0,a=[],c("destroy"),l("Se elimin贸 la configuraci贸n de los elementos.")},s.autoInit&&document.fonts.ready.then((()=>{this.init()})).catch((e=>{window.console.log(e)})),window.SHE.Instances.push(this),l("Se agreg贸 la instancia en 'window.SHE.Instances'"),this}window.SHE=window.SHE||{Init:SetHeightElements,Instances:[]};export default SetHeightElements;